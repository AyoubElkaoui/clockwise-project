-- Migration 014: Create Periods Table
-- Purpose: Store time periods for timesheets (migrated from Firebird AT_URENPER)
-- Date: 2026-01-26

CREATE TABLE IF NOT EXISTS periods (
    gc_id SERIAL PRIMARY KEY,
    gc_code VARCHAR(50) NOT NULL UNIQUE,
    begin_datum DATE NOT NULL,
    end_datum DATE NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(begin_datum, end_datum)
);

-- Create indexes
CREATE INDEX idx_periods_begin_datum ON periods(begin_datum);
CREATE INDEX idx_periods_end_datum ON periods(end_datum);
CREATE INDEX idx_periods_gc_code ON periods(gc_code);

-- Insert sample periods (weekly periods for 2026)
-- Starting from January 2026
INSERT INTO periods (gc_code, begin_datum, end_datum) VALUES
('2026-W01', '2026-01-01', '2026-01-07'),
('2026-W02', '2026-01-08', '2026-01-14'),
('2026-W03', '2026-01-15', '2026-01-21'),
('2026-W04', '2026-01-22', '2026-01-28'),
('2026-W05', '2026-01-29', '2026-02-04'),
('2026-W06', '2026-02-05', '2026-02-11'),
('2026-W07', '2026-02-12', '2026-02-18'),
('2026-W08', '2026-02-19', '2026-02-25'),
('2026-W09', '2026-02-26', '2026-03-04'),
('2026-W10', '2026-03-05', '2026-03-11'),
('2026-W11', '2026-03-12', '2026-03-18'),
('2026-W12', '2026-03-19', '2026-03-25'),
('2026-W13', '2026-03-26', '2026-04-01'),
('2026-W14', '2026-04-02', '2026-04-08'),
('2026-W15', '2026-04-09', '2026-04-15'),
('2026-W16', '2026-04-16', '2026-04-22'),
('2026-W17', '2026-04-23', '2026-04-29'),
('2026-W18', '2026-04-30', '2026-05-06'),
('2026-W19', '2026-05-07', '2026-05-13'),
('2026-W20', '2026-05-14', '2026-05-20'),
('2026-W21', '2026-05-21', '2026-05-27'),
('2026-W22', '2026-05-28', '2026-06-03'),
('2026-W23', '2026-06-04', '2026-06-10'),
('2026-W24', '2026-06-11', '2026-06-17'),
('2026-W25', '2026-06-18', '2026-06-24'),
('2026-W26', '2026-06-25', '2026-07-01'),
('2026-W27', '2026-07-02', '2026-07-08'),
('2026-W28', '2026-07-09', '2026-07-15'),
('2026-W29', '2026-07-16', '2026-07-22'),
('2026-W30', '2026-07-23', '2026-07-29'),
('2026-W31', '2026-07-30', '2026-08-05'),
('2026-W32', '2026-08-06', '2026-08-12'),
('2026-W33', '2026-08-13', '2026-08-19'),
('2026-W34', '2026-08-20', '2026-08-26'),
('2026-W35', '2026-08-27', '2026-09-02'),
('2026-W36', '2026-09-03', '2026-09-09'),
('2026-W37', '2026-09-10', '2026-09-16'),
('2026-W38', '2026-09-17', '2026-09-23'),
('2026-W39', '2026-09-24', '2026-09-30'),
('2026-W40', '2026-10-01', '2026-10-07'),
('2026-W41', '2026-10-08', '2026-10-14'),
('2026-W42', '2026-10-15', '2026-10-21'),
('2026-W43', '2026-10-22', '2026-10-28'),
('2026-W44', '2026-10-29', '2026-11-04'),
('2026-W45', '2026-11-05', '2026-11-11'),
('2026-W46', '2026-11-12', '2026-11-18'),
('2026-W47', '2026-11-19', '2026-11-25'),
('2026-W48', '2026-11-26', '2026-12-02'),
('2026-W49', '2026-12-03', '2026-12-09'),
('2026-W50', '2026-12-10', '2026-12-16'),
('2026-W51', '2026-12-17', '2026-12-23'),
('2026-W52', '2026-12-24', '2026-12-30'),
('2026-W53', '2026-12-31', '2027-01-06')
ON CONFLICT (gc_code) DO NOTHING;

-- Add comment
COMMENT ON TABLE periods IS 'Time periods for timesheets (migrated from Firebird AT_URENPER)';</content>
<parameter name="filePath">c:\Users\Ayoub\Desktop\clockwise-project\backend\Migrations\014_CreatePeriodsTable.sql